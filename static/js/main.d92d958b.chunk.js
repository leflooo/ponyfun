(this.webpackJsonpponyfun=this.webpackJsonpponyfun||[]).push([[0],{14:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var s=n(2),a=n.n(s),i=n(15),c=n.n(i),o=(n(14),n(5)),r=n.n(o),l=n(11),u=n(7),h=n(8),d=n(10),j=n(9),p=n(16),b=n(3),f=n(4),m=n(0),O=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={props:t.currentContact,errors:{name:"",note:""}},s}return Object(h.a)(n,[{key:"componentWillReceiveProps",value:function(t){this.setState(t.currentContact)}},{key:"shouldComponentUpdate",value:function(t){return!0}},{key:"handleInputChange",value:function(t){this.setState(Object(p.a)({},t.target.name,t.target.value))}},{key:"newContact",value:function(t){t.preventDefault(),this.props.newContact()}},{key:"deleteContact",value:function(t){t.preventDefault(),window.confirm(this.props.currentContact.name+" wirklich l\xf6schen?")&&(this.props.deleteContact(this.props.currentContact),this.close(t))}},{key:"handleValidation",value:function(){var t=this.state,e={},n=!0;return t.name||(n=!1,e.name="Bitte ausf\xfcllen!"),t.note.length>30&&(n=!1,e.note="zu viele Zeichen!"),this.setState({errors:e}),n}},{key:"addOrUpdateContact",value:function(t){t.preventDefault(),this.handleValidation()&&(this.state.outorin||(this.state.outorin="0"),this.state.position||(this.state.position="EG"),this.props.addOrUpdateContact(this.state),this.close(t))}},{key:"close",value:function(t){t.preventDefault(),this.props.onClose&&this.props.onClose()}},{key:"render",value:function(){var t=this;return!1===this.props.isOpen?null:Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("h4",{children:this.props.currentContact.uid?"Pferdedaten":"Neues Pferd anlegen"}),Object(m.jsx)(b.a,{onClick:function(e){return t.close(e)},className:"close",icon:f.e,color:"grey",transform:"grow-6"})]}),Object(m.jsxs)("form",{onSubmit:function(e){return t.addOrUpdateContact(e)},children:[Object(m.jsxs)("div",{className:"task-input",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(m.jsx)("input",{type:"text",id:"name",name:"name",value:this.state.name,onChange:function(e){return t.handleInputChange(e)}}),Object(m.jsx)("span",{style:{color:"red"},children:this.state.errors.name})]}),Object(m.jsxs)("div",{className:"select-wrapper",children:[Object(m.jsx)("label",{htmlFor:"position",children:"Box Standort:"}),Object(m.jsxs)("select",{id:"position",name:"position",value:this.state.position,onChange:function(e){return t.handleInputChange(e)},children:[Object(m.jsx)("option",{value:"EG",children:"EG"}),Object(m.jsx)("option",{value:"1.Stock",children:"1.Stock"}),Object(m.jsx)("option",{value:" Lisa Stall",children:"Lisa Stall"})]})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{className:"picker",children:Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("legend",{children:"Raus?"}),Object(m.jsx)("label",{children:"Ja:"}),Object(m.jsx)("input",{className:"task-status",name:"outorin",type:"radio",value:"1",defaultChecked:"1"===this.state.outorin,onChange:function(e){return t.handleInputChange(e)}}),Object(m.jsx)("label",{children:"Nein:"}),Object(m.jsx)("input",{className:"task-status",name:"outorin",type:"radio",value:"2",defaultChecked:"2"===this.state.outorin,onChange:function(e){return t.handleInputChange(e)}}),Object(m.jsx)("label",{children:"Egal:"}),Object(m.jsx)("input",{className:"task-status",name:"outorin",type:"radio",value:"0",defaultChecked:"0"===this.state.outorin,onChange:function(e){return t.handleInputChange(e)}})]})}),Object(m.jsxs)("div",{className:"task-input",children:[Object(m.jsx)("label",{htmlFor:"note",children:"Notiz:"}),Object(m.jsx)("input",{type:"text",id:"note",name:"note",value:this.state.note,onChange:function(e){return t.handleInputChange(e)}}),Object(m.jsx)("span",{style:{color:"red"},children:this.state.errors.note})]}),Object(m.jsx)("div",{className:"task-count",children:Object(m.jsx)("label",{htmlFor:"status",children:this.state.status})}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{className:"action picker",children:[this.props.currentContact.uid&&Object(m.jsxs)("button",{href:"#",className:"btn delete",onClick:function(e){return t.deleteContact(e)},children:[Object(m.jsx)(b.a,{icon:f.f,transform:"grow-4"}),"\xa0L\xf6schen"]}),Object(m.jsxs)("button",{type:"submit",className:"btn right save",children:[Object(m.jsx)(b.a,{icon:f.a,transform:"grow-4"}),"\xa0Speichern"]})]})]})]}),Object(m.jsx)("div",{className:"bg",onClick:function(e){return t.close(e)}})]})}}]),n}(a.a.Component),v=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).sm=1,s.emptyContact={uid:"",name:"",position:"",outorin:0,status:"",note:"",img:""},s.state={contacts:[],currentContact:s.emptyContact,isModalOpen:!1,filter:["0","1","2"],sortby:"outorin"},s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getContacts()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.intervalID)}},{key:"selectContact",value:function(t){this.setState({currentContact:this.state.contacts.filter((function(e){return e.uid===t}))[0],isModalOpen:!0})}},{key:"openModal",value:function(){clearTimeout(this.intervalID),this.setState({isModalOpen:!0})}},{key:"closeModal",value:function(){this.setState({isModalOpen:!1}),this.getContacts()}},{key:"newContact",value:function(){this.setState({currentContact:this.emptyContact,isModalOpen:!0})}},{key:"sortinga",value:function(t,e){return"outorin"===this.state.sortby?t.outorin>e.outorin?1*this.sm:-1*this.sm:"position"===this.state.sortby?t.position.localeCompare(e.position)<1?1*this.sm:-1*this.sm:void 0}},{key:"changeSort",value:function(t,e){this.state.sortby===e&&(this.sm=-1*this.sm),this.setState({sortby:e})}},{key:"filter",value:function(t){if(console.log(t.target.value),t.target.classList.contains("is-active")){t.target.classList.remove("is-active");var e=this.state.filter,n=e.indexOf(t.target.value);-1!==n&&(e.splice(n,1),this.setState({filter:e}))}else t.target.classList.add("is-active"),this.setState({filter:this.state.filter.concat(t.target.value)})}},{key:"getContacts",value:function(){var t=Object(l.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.isModalOpen){t.next=6;break}return t.next=3,fetch(this.props.config.Url,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()}));case 3:e=t.sent,console.log(e.Items),this.setState({contacts:e.Items});case 6:this.intervalID=setTimeout(this.getContacts.bind(this),1e4);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"addOrUpdateContact",value:function(){var t=Object(l.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=""===e.uid?"POST":"PUT",t.next=3,fetch(this.props.config.Url,{method:n,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 3:this.getContacts();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"deleteContact",value:function(){var t=Object(l.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.props.config.Url,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 2:this.getContacts();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"app",children:[Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("h1",{className:"task-header-title",children:"Koppelspa\xdf "}),Object(m.jsx)(b.a,{onClick:function(e){return t.newContact(e)},className:"add",icon:f.c,color:"MediumAquaMarine",transform:"grow-15"})]}),Object(m.jsx)("div",{className:"task-tools",children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("button",{className:"task-filter is-active","data-param":"outorin",value:"1",onClick:function(e){return t.filter(e)},children:["Raus (",this.state.contacts.filter((function(t){return"1"===t.outorin})).length,")"]}),Object(m.jsxs)("button",{className:"task-filter is-active","data-param":"outorin",value:"2",onClick:function(e){return t.filter(e)},children:["Nicht raus (",this.state.contacts.filter((function(t){return"2"===t.outorin})).length,")"]}),Object(m.jsxs)("button",{className:"task-filter is-active",value:"0",onClick:function(e){return t.filter(e)},children:["Egal (",this.state.contacts.filter((function(t){return"1"!==t.outorin&&"2"!==t.outorin})).length,")"]})]})}),Object(m.jsxs)("div",{className:"sort-wrapper",children:[Object(m.jsx)("div",{className:"task-sorter left",onClick:function(e){return t.changeSort(e,"outorin")},children:Object(m.jsx)("p",{className:"task-sort",children:Object(m.jsx)(b.a,{icon:f.d,transform:"grow-5"})})}),Object(m.jsx)("div",{className:"task-sorter right",onClick:function(e){return t.changeSort(e,"position")},children:Object(m.jsx)("p",{className:"task-sort",children:Object(m.jsx)(b.a,{icon:f.d,transform:"grow-5"})})})]}),Object(m.jsx)("div",{className:"task-list",children:this.state.contacts.filter((function(e){return t.state.filter.includes(e.outorin.toString())})).sort((function(e,n){return t.sortinga(e,n)})).map((function(e){return Object(m.jsxs)("div",{className:"1"===e.outorin?"task-item wantsout":"2"===e.outorin?"task-item wantsnotout":"task-item",children:[Object(m.jsx)("label",{className:"1"===e.outorin?"pony-wantout":"2"===e.outorin?"pony-wantnotout":"pony-dontcare"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:Object(m.jsx)("label",{className:"task-name",children:Object(m.jsx)("span",{children:e.name})})}),Object(m.jsx)("div",{className:"status",children:Object(m.jsx)("label",{children:Object(m.jsxs)("span",{children:[e.note,"\u2003"]})})})]}),Object(m.jsxs)("div",{className:"right",children:[Object(m.jsx)("div",{children:Object(m.jsx)("label",{children:Object(m.jsx)("span",{children:e.position})})}),Object(m.jsx)("div",{children:Object(m.jsx)("label",{onClick:function(){return t.selectContact(e.uid)},children:Object(m.jsx)("span",{className:"edit",children:Object(m.jsx)(b.a,{icon:f.b,transform:"shrink-3"})})})})]})]},e.uid)}))})]}),Object(m.jsx)(O,{isOpen:this.state.isModalOpen,onClose:function(){return t.closeModal()},currentContact:this.state.currentContact,newContact:function(){return t.newContact()},addOrUpdateContact:function(e){return t.addOrUpdateContact(e)},deleteContact:function(e){return t.deleteContact(e)}})]})}}]),n}(a.a.Component);c.a.render(Object(m.jsx)(v,{config:{Url:"https://ju6w4ca8tc.execute-api.eu-central-1.amazonaws.com/default/myHorseFun"}}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.d92d958b.chunk.js.map